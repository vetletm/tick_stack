# Telegraf Configuration
#
# THIS FILE IS MANAGED BY PUPPET
#
<% if scope['tick_stack::telegraf::global_tags'] -%>
[global_tags]
<%   scope['tick_stack::telegraf::global_tags'].each do |key, value| -%>
  <%= key %> = "<%= value %>"
<%   end -%>
<% end -%>

<% if scope['tick_stack::telegraf::agent'] -%>
[agent]
<%   scope['tick_stack::telegraf::agent'].each do |key, value| -%>
  <%= key %> = "<%= value %>"
<%   end -%>
<% end -%>

<% if scope['tick_stack::telegraf::outputs'] -%>
# OUTPUTS
<% scope['tick_stack::telegraf::outputs'].each do |key,hash| -%>
[[outputs.<%= key %>]]
<% hash.each do |key,value| -%>
<%= key %> = <%= value %>
<%   end -%>
<%  end -%>
<% end -%>

<% if scope['tick_stack::telegraf::inputs'] -%>
# INPUTS
<% scope['tick_stack::telegraf::inputs'].each do |key,hash| -%>
[[inputs.<%= key %>]]
<% hash.each do |key,value| -%>
<%= key %> = <%= value %>
<%   end -%>

<%  end -%>
<% end -%>
